<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>LSPD Başvuru Formu</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', sans-serif; overflow: hidden; color: white; background: #1a1a1a; }
        .container { height: 100vh; overflow-y: scroll; scroll-snap-type: y mandatory; scroll-behavior: smooth; }
        .section { height: 100vh; scroll-snap-align: start; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; background: linear-gradient(45deg, #0f2027, #203a43, #2c5364); }
        input { padding: 15px; font-size: 1.2rem; border-radius: 5px; border: none; width: 300px; margin-top: 20px; }
        button { padding: 15px 40px; font-size: 1.2rem; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px; }
        button:hover { background-color: #0056b3; }
        h2 { font-size: 2.5rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
</head>
<body>

<div class="container" id="mainContainer">
    <div class="section">
        <h2>LSPD Başvuru Sistemi</h2>
        <p>Soruları cevaplamak için aşağı kaydırın.</p>
        <div style="font-size:3rem; margin-top:20px;">⬇️</div>
    </div>

    <div class="section">
        <h2>Discord ID'niz</h2>
        <input type="text" id="discord_id" placeholder="Örn: 123456789">
    </div>

    <div class="section">
        <h2>Karakter Adı Soyadı (IC)</h2>
        <input type="text" id="ic_isim" placeholder="Örn: John Doe">
    </div>

    <div class="section">
        <h2>Gerçek Yaşınız (OOC)</h2>
        <input type="number" id="ooc_yas" placeholder="Yaşınız">
    </div>

    <div class="section">
        <h2>Onaylıyor musun?</h2>
        <p>Yalan beyanda bulunmak yasaklanma sebebidir.</p>
        <button onclick="basvuruGonder()">Başvuruyu Tamamla</button>
        <p id="msg" style="margin-top:20px; font-weight:bold;"></p>
        <a href="index.html" style="color: #ccc; margin-top:20px;">Ana Sayfaya Dön</a>
    </div>
</div>

<script src="config.js"></script>
<script>
    function basvuruGonder() {
        const discord_id = document.getElementById('discord_id').value;
        const ic_isim = document.getElementById('ic_isim').value;
        const ooc_yas = document.getElementById('ooc_yas').value;

        if (!discord_id || !ic_isim || !ooc_yas) {
            alert("Lütfen tüm alanları doldurun!");
            return;
        }

        // Firebase'e veri ekle
        const yeniBasvuru = database.ref('basvurular').push();
        yeniBasvuru.set({
            discord_id: discord_id,
            ic_isim: ic_isim,
            ooc_yas: ooc_yas,
            durum: 'Beklemede',
            tarih: new Date().toISOString()
        }, (error) => {
            if (error) {
                alert('Hata oluştu: ' + error.message);
            } else {
                document.getElementById('msg').innerText = "Başvurunuz başarıyla alındı!";
                document.getElementById('msg').style.color = "#00ff00";
                // 2 saniye sonra ana sayfaya at
                setTimeout(() => { window.location.href = 'index.html'; }, 2000);
            }
        });
    }
</script>

</body>
</html>