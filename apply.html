<script src="config.js"></script>
<script>
    const q = [
        {id:'info', t:'info', h:'EGM SİBER BAŞVURU', s:'Başvurunuz sisteme işlenecektir.'},
        {id:'discord_id', t:'text', h:'KİMLİK DOĞRULAMA', s:'Discord ID Giriniz:'},
        {id:'ic_isim', t:'text', h:'KİMLİK BİLGİLERİ', s:'Karakter Adı Soyadı (IC):'},
        {id:'ooc_yas', t:'number', h:'KİŞİSEL BİLGİLER', s:'Gerçek Yaşınız (OOC):'},
        {id:'aktiflik', t:'number', h:'AKTİFLİK', s:'Günlük aktiflik süreniz?'},
        {id:'karakter_hikaye', t:'textarea', h:'KARAKTER ANALİZİ', s:'Polis olma motivasyonunuz?'}
    ];

    let idx = 0; let ans = {}; let soruMetinleri = {};

    function nav(d) {
        if(d === 1) {
            const currentItem = q[idx];
            if(currentItem.t !== 'info') {
                const val = document.getElementById('inp').value.trim();
                if(!val) { alert('Lütfen boş bırakmayın!'); return; }
                ans[currentItem.id] = val;
                soruMetinleri[currentItem.id] = currentItem.s;
            }
        }
        if(d === 1 && idx === q.length-1) return send();
        idx += d; render();
    }

    function send() {
        database.ref('blacklist').orderByChild('discord_id').equalTo(ans.discord_id).once('value', s => {
            if (s.exists()) return alert("Yasaklı ID!");
            
            const data = { 
                discord_id: ans.discord_id, 
                ic_isim: ans.ic_isim, 
                ooc_yas: ans.ooc_yas, 
                durum: 'Beklemede', 
                tarih: new Date().toISOString(), 
                cevaplar: ans, 
                soru_detaylari: soruMetinleri
            };
            
            database.ref('basvurular').push(data).then(() => {
                document.querySelector('.card').innerHTML = "<h1>BAŞVURU İLETİLDİ ✅</h1>";
            });
        });
    }
    // render fonksiyonu senin orijinal kodunla aynı kalacak.
</script>
